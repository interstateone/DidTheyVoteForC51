var ballots = [
  {
    ballot: "Didn't vote",
    politician_url: "/politicians/jean-francois-fortin/",
    name: "Jean-François Fortin"
  },
  {
    ballot: "Didn't vote",
    politician_url: "/politicians/andre-bellavance/",
    name: "André Bellavance"
  },
  {
    ballot: "Didn't vote",
    politician_url: "/politicians/arnold-chan/",
    name: "Arnold Chan"
  },
  {
    ballot: "Didn't vote",
    politician_url: "/politicians/manon-perreault/",
    name: "Manon Perreault"
  },
  {
    ballot: "Didn't vote",
    politician_url: "/politicians/sana-hassainia/",
    name: "Sana Hassainia"
  },
  {
    ballot: "Didn't vote",
    politician_url: "/politicians/maria-mourani/",
    name: "Maria Mourani"
  },
  {
    ballot: "Didn't vote",
    politician_url: "/politicians/brent-rathgeber/",
    name: "Brent Rathgeber"
  },
  {
    ballot: "Didn't vote",
    politician_url: "/politicians/stephen-harper/",
    name: "Stephen Harper"
  },
  {
    ballot: "Didn't vote",
    politician_url: "/politicians/rick-dykstra/",
    name: "Rick Dykstra"
  },
  {
    ballot: "Didn't vote",
    politician_url: "/politicians/patrick-brown/",
    name: "Patrick Brown"
  },
  {
    ballot: "Didn't vote",
    politician_url: "/politicians/devinder-shory/",
    name: "Devinder Shory"
  },
  {
    ballot: "Didn't vote",
    politician_url: "/politicians/gerry-byrne/",
    name: "Gerry Byrne"
  },
  {
    ballot: "Didn't vote",
    politician_url: "/politicians/lise-st-denis/",
    name: "Lise St-Denis"
  },
  {
    ballot: "Didn't vote",
    politician_url: "/politicians/keith-ashfield/",
    name: "Keith Ashfield"
  },
  {
    ballot: "Didn't vote",
    politician_url: "/politicians/pierre-jacob/",
    name: "Pierre Jacob"
  },
  {
    ballot: "Didn't vote",
    politician_url: "/politicians/andrew-scheer/",
    name: "Andrew Scheer"
  },
  {
    ballot: "Didn't vote",
    politician_url: "/politicians/gerry-ritz/",
    name: "Gerry Ritz"
  },
  {
    ballot: "Didn't vote",
    politician_url: "/politicians/joyce-bateman/",
    name: "Joyce Bateman"
  },
  {
    ballot: "Didn't vote",
    politician_url: "/politicians/rod-bruinooge/",
    name: "Rod Bruinooge"
  },
  {
    ballot: "Didn't vote",
    politician_url: "/politicians/john-baird/",
    name: "John Baird"
  },
  {
    ballot: "Didn't vote",
    politician_url: "/politicians/chris-alexander/",
    name: "Chris Alexander"
  },
  {
    ballot: "Didn't vote",
    politician_url: "/politicians/marc-andre-morin/",
    name: "Marc-André Morin"
  },
  {
    ballot: "Didn't vote",
    politician_url: "/politicians/tyrone-benskin/",
    name: "Tyrone Benskin"
  },
  {
    ballot: "Didn't vote",
    politician_url: "/politicians/nycole-turmel/",
    name: "Nycole Turmel"
  },
  {
    ballot: "Didn't vote",
    politician_url: "/politicians/christine-moore/",
    name: "Christine Moore"
  },
  {
    ballot: "Didn't vote",
    politician_url: "/politicians/gail-shea/",
    name: "Gail Shea"
  },
  {
    ballot: "Didn't vote",
    politician_url: "/politicians/joe-oliver/",
    name: "Joe Oliver"
  },
  {
    ballot: "No",
    politician_url: "/politicians/elizabeth-may/",
    name: "Elizabeth May"
  },
  {
    ballot: "No",
    politician_url: "/politicians/bruce-hyer/",
    name: "Bruce Hyer"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/adam-vaughan/",
    name: "Adam Vaughan"
  },
  {
    ballot: "No",
    politician_url: "/politicians/jean-francois-larose/",
    name: "Jean-François Larose"
  },
  {
    ballot: "No",
    politician_url: "/politicians/claude-patry/",
    name: "Claude Patry"
  },
  {
    ballot: "No",
    politician_url: "/politicians/louis-plamondon/",
    name: "Louis Plamondon"
  },
  {
    ballot: "No",
    politician_url: "/politicians/alex-atamanenko/",
    name: "Alex Atamanenko"
  },
  {
    ballot: "No",
    politician_url: "/politicians/isabelle-morin/",
    name: "Isabelle Morin"
  },
  {
    ballot: "No",
    politician_url: "/politicians/laurin-liu/",
    name: "Laurin Liu"
  },
  {
    ballot: "No",
    politician_url: "/politicians/dany-morin/",
    name: "Dany Morin"
  },
  {
    ballot: "No",
    politician_url: "/politicians/sylvain-chicoine/",
    name: "Sylvain Chicoine"
  },
  {
    ballot: "No",
    politician_url: "/politicians/peter-stoffer/",
    name: "Peter Stoffer"
  },
  {
    ballot: "No",
    politician_url: "/politicians/rejean-genest/",
    name: "Réjean Genest"
  },
  {
    ballot: "No",
    politician_url: "/politicians/francois-pilon/",
    name: "François Pilon"
  },
  {
    ballot: "No",
    politician_url: "/politicians/jonathan-tremblay/",
    name: "Jonathan Tremblay"
  },
  {
    ballot: "No",
    politician_url: "/politicians/jose-nunez-melo/",
    name: "José Nunez-Melo"
  },
  {
    ballot: "No",
    politician_url: "/politicians/marie-claude-morin/",
    name: "Marie-Claude Morin"
  },
  {
    ballot: "No",
    politician_url: "/politicians/joe-comartin/",
    name: "Joe Comartin"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/james-lunney/",
    name: "James Lunney"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/scott-andrews/",
    name: "Scott Andrews"
  },
  {
    ballot: "No",
    politician_url: "/politicians/massimo-pacetti/",
    name: "Massimo Pacetti"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/yvonne-jones/",
    name: "Yvonne Jones"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/chrystia-freeland/",
    name: "Chrystia Freeland"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/emmanuel-dubourg/",
    name: "Emmanuel Dubourg"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/sean-casey/",
    name: "Sean Casey"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/ted-hsu/",
    name: "Ted Hsu"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/eve-adams/",
    name: "Eve Adams"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/marc-garneau/",
    name: "Marc Garneau"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/scott-simms/",
    name: "Scott Simms"
  },
  {
    ballot: "No",
    politician_url: "/politicians/alexandrine-latendresse/",
    name: "Alexandrine Latendresse"
  },
  {
    ballot: "No",
    politician_url: "/politicians/francine-raynault/",
    name: "Francine Raynault"
  },
  {
    ballot: "No",
    politician_url: "/politicians/jamie-nicholls/",
    name: "Jamie Nicholls"
  },
  {
    ballot: "No",
    politician_url: "/politicians/charmaine-borg/",
    name: "Charmaine Borg"
  },
  {
    ballot: "No",
    politician_url: "/politicians/anne-minh-thu-quach/",
    name: "Anne Minh-Thu Quach"
  },
  {
    ballot: "No",
    politician_url: "/politicians/rosane-dore-lefebvre/",
    name: "Rosane Doré Lefebvre"
  },
  {
    ballot: "No",
    politician_url: "/politicians/rathika-sitsabaiesan/",
    name: "Rathika Sitsabaiesan"
  },
  {
    ballot: "No",
    politician_url: "/politicians/mylene-freeman/",
    name: "Mylène Freeman"
  },
  {
    ballot: "No",
    politician_url: "/politicians/pierre-dionne-labelle/",
    name: "Pierre Dionne Labelle"
  },
  {
    ballot: "No",
    politician_url: "/politicians/djaouida-sellah/",
    name: "Djaouida Sellah"
  },
  {
    ballot: "No",
    politician_url: "/politicians/jasbir-sandhu/",
    name: "Jasbir Sandhu"
  },
  {
    ballot: "No",
    politician_url: "/politicians/francois-choquette/",
    name: "François Choquette"
  },
  {
    ballot: "No",
    politician_url: "/politicians/pierre-luc-dusseault/",
    name: "Pierre-Luc Dusseault"
  },
  {
    ballot: "No",
    politician_url: "/politicians/raymond-cote/",
    name: "Raymond Côté"
  },
  {
    ballot: "No",
    politician_url: "/politicians/francois-lapointe/",
    name: "François Lapointe"
  },
  {
    ballot: "No",
    politician_url: "/politicians/jonathan-genest-jourdain/",
    name: "Jonathan Genest-Jourdain"
  },
  {
    ballot: "No",
    politician_url: "/politicians/jean-rousseau/",
    name: "Jean Rousseau"
  },
  {
    ballot: "No",
    politician_url: "/politicians/tarik-brahmi/",
    name: "Tarik Brahmi"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/pat-perkins/",
    name: "Pat Perkins"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/barry-devolin/",
    name: "Barry Devolin"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/david-mcguinty/",
    name: "David McGuinty"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/joyce-murray/",
    name: "Joyce Murray"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/kirsty-duncan/",
    name: "Kirsty Duncan"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/francis-scarpaleggia/",
    name: "Francis Scarpaleggia"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/john-mccallum/",
    name: "John McCallum"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/mark-eyking/",
    name: "Mark Eyking"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/rodger-cuzner/",
    name: "Rodger Cuzner"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/john-mckay/",
    name: "John McKay"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/irwin-cotler/",
    name: "Irwin Cotler"
  },
  {
    ballot: "No",
    politician_url: "/politicians/ryan-cleary/",
    name: "Ryan Cleary"
  },
  {
    ballot: "No",
    politician_url: "/politicians/dan-harris/",
    name: "Dan Harris"
  },
  {
    ballot: "No",
    politician_url: "/politicians/denis-blanchette/",
    name: "Denis Blanchette"
  },
  {
    ballot: "No",
    politician_url: "/politicians/elaine-michaud/",
    name: "Élaine Michaud"
  },
  {
    ballot: "No",
    politician_url: "/politicians/claude-gravelle/",
    name: "Claude Gravelle"
  },
  {
    ballot: "No",
    politician_url: "/politicians/eve-peclet/",
    name: "Ève Péclet"
  },
  {
    ballot: "No",
    politician_url: "/politicians/pierre-nantel/",
    name: "Pierre Nantel"
  },
  {
    ballot: "No",
    politician_url: "/politicians/romeo-saganash/",
    name: "Romeo Saganash"
  },
  {
    ballot: "No",
    politician_url: "/politicians/helene-leblanc/",
    name: "Hélène LeBlanc"
  },
  {
    ballot: "No",
    politician_url: "/politicians/lysane-blanchette-lamothe/",
    name: "Lysane Blanchette-Lamothe"
  },
  {
    ballot: "No",
    politician_url: "/politicians/matthew-dube/",
    name: "Matthew Dubé"
  },
  {
    ballot: "No",
    politician_url: "/politicians/robert-aubin/",
    name: "Robert Aubin"
  },
  {
    ballot: "No",
    politician_url: "/politicians/annick-papillon/",
    name: "Annick Papillon"
  },
  {
    ballot: "No",
    politician_url: "/politicians/mathieu-ravignat/",
    name: "Mathieu Ravignat"
  },
  {
    ballot: "No",
    politician_url: "/politicians/randall-garrison/",
    name: "Randall Garrison"
  },
  {
    ballot: "No",
    politician_url: "/politicians/kennedy-stewart/",
    name: "Kennedy Stewart"
  },
  {
    ballot: "No",
    politician_url: "/politicians/andrew-cash/",
    name: "Andrew Cash"
  },
  {
    ballot: "No",
    politician_url: "/politicians/mike-sullivan/",
    name: "Mike Sullivan"
  },
  {
    ballot: "No",
    politician_url: "/politicians/paulina-ayala/",
    name: "Paulina Ayala"
  },
  {
    ballot: "No",
    politician_url: "/politicians/alain-giguere/",
    name: "Alain Giguère"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/jim-eglinski/",
    name: "Jim Eglinski"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/john-barlow/",
    name: "John Barlow"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/bruce-stanton/",
    name: "Bruce Stanton"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/scott-brison/",
    name: "Scott Brison"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/carolyn-bennett/",
    name: "Carolyn Bennett"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/judy-sgro/",
    name: "Judy Sgro"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/stephane-dion/",
    name: "Stéphane Dion"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/kevin-lamoureux/",
    name: "Kevin Lamoureux"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/judy-foote/",
    name: "Judy Foote"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/frank-valeriote/",
    name: "Frank Valeriote"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/mauril-belanger/",
    name: "Mauril Bélanger"
  },
  {
    ballot: "No",
    politician_url: "/politicians/chris-charlton/",
    name: "Chris Charlton"
  },
  {
    ballot: "No",
    politician_url: "/politicians/jean-crowder/",
    name: "Jean Crowder"
  },
  {
    ballot: "No",
    politician_url: "/politicians/john-rafferty/",
    name: "John Rafferty"
  },
  {
    ballot: "No",
    politician_url: "/politicians/guy-caron/",
    name: "Guy Caron"
  },
  {
    ballot: "No",
    politician_url: "/politicians/carol-hughes/",
    name: "Carol Hughes"
  },
  {
    ballot: "No",
    politician_url: "/politicians/wayne-marston/",
    name: "Wayne Marston"
  },
  {
    ballot: "No",
    politician_url: "/politicians/charlie-angus/",
    name: "Charlie Angus"
  },
  {
    ballot: "No",
    politician_url: "/politicians/alexandre-boulerice/",
    name: "Alexandre Boulerice"
  },
  {
    ballot: "No",
    politician_url: "/politicians/robert-chisholm/",
    name: "Robert Chisholm"
  },
  {
    ballot: "No",
    politician_url: "/politicians/sadia-groguhe/",
    name: "Sadia Groguhé"
  },
  {
    ballot: "No",
    politician_url: "/politicians/philip-toone/",
    name: "Philip Toone"
  },
  {
    ballot: "No",
    politician_url: "/politicians/ruth-ellen-brosseau/",
    name: "Ruth Ellen Brosseau"
  },
  {
    ballot: "No",
    politician_url: "/politicians/matthew-kellway/",
    name: "Matthew Kellway"
  },
  {
    ballot: "No",
    politician_url: "/politicians/craig-scott/",
    name: "Craig Scott"
  },
  {
    ballot: "No",
    politician_url: "/politicians/murray-rankin/",
    name: "Murray Rankin"
  },
  {
    ballot: "No",
    politician_url: "/politicians/fin-donnelly/",
    name: "Fin Donnelly"
  },
  {
    ballot: "No",
    politician_url: "/politicians/anne-marie-day/",
    name: "Anne-Marie Day"
  },
  {
    ballot: "No",
    politician_url: "/politicians/hoang-mai/",
    name: "Hoang Mai"
  },
  {
    ballot: "No",
    politician_url: "/politicians/dennis-bevington/",
    name: "Dennis Bevington"
  },
  {
    ballot: "No",
    politician_url: "/politicians/yvon-godin/",
    name: "Yvon Godin"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/david-yurdiga/",
    name: "David Yurdiga"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/ted-falk/",
    name: "Ted Falk"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/larry-maguire/",
    name: "Larry Maguire"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/geoff-regan/",
    name: "Geoff Regan"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/hedy-fry/",
    name: "Hedy Fry"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/wayne-easter/",
    name: "Wayne Easter"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/dominic-leblanc/",
    name: "Dominic LeBlanc"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/justin-trudeau/",
    name: "Justin Trudeau"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/ralph-goodale/",
    name: "Ralph Goodale"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/lawrence-macaulay/",
    name: "Lawrence MacAulay"
  },
  {
    ballot: "No",
    politician_url: "/politicians/brian-masse/",
    name: "Brian Masse"
  },
  {
    ballot: "No",
    politician_url: "/politicians/marjolaine-boutin-sweet/",
    name: "Marjolaine Boutin-Sweet"
  },
  {
    ballot: "No",
    politician_url: "/politicians/irene-mathyssen/",
    name: "Irene Mathyssen"
  },
  {
    ballot: "No",
    politician_url: "/politicians/don-davies/",
    name: "Don Davies"
  },
  {
    ballot: "No",
    politician_url: "/politicians/niki-ashton/",
    name: "Niki Ashton"
  },
  {
    ballot: "No",
    politician_url: "/politicians/nathan-cullen/",
    name: "Nathan Cullen"
  },
  {
    ballot: "No",
    politician_url: "/politicians/peggy-nash/",
    name: "Peggy Nash"
  },
  {
    ballot: "No",
    politician_url: "/politicians/david-christopherson/",
    name: "David Christopherson"
  },
  {
    ballot: "No",
    politician_url: "/politicians/megan-leslie/",
    name: "Megan Leslie"
  },
  {
    ballot: "No",
    politician_url: "/politicians/thomas-mulcair/",
    name: "Thomas Mulcair"
  },
  {
    ballot: "No",
    politician_url: "/politicians/peter-julian/",
    name: "Peter Julian"
  },
  {
    ballot: "No",
    politician_url: "/politicians/libby-davies/",
    name: "Libby Davies"
  },
  {
    ballot: "No",
    politician_url: "/politicians/francoise-boivin/",
    name: "Françoise Boivin"
  },
  {
    ballot: "No",
    politician_url: "/politicians/jack-harris/",
    name: "Jack Harris"
  },
  {
    ballot: "No",
    politician_url: "/politicians/paul-dewar/",
    name: "Paul Dewar"
  },
  {
    ballot: "No",
    politician_url: "/politicians/linda-duncan/",
    name: "Linda Duncan"
  },
  {
    ballot: "No",
    politician_url: "/politicians/malcolm-allen/",
    name: "Malcolm Allen"
  },
  {
    ballot: "No",
    politician_url: "/politicians/jinny-sims/",
    name: "Jinny Sims"
  },
  {
    ballot: "No",
    politician_url: "/politicians/helene-laverdiere/",
    name: "Hélène Laverdière"
  },
  {
    ballot: "No",
    politician_url: "/politicians/pat-martin/",
    name: "Pat Martin"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/joan-crockatt/",
    name: "Joan Crockatt"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/bob-zimmer/",
    name: "Bob Zimmer"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/wai-young/",
    name: "Wai Young"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/john-williamson/",
    name: "John Williamson"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/david-wilks/",
    name: "David Wilks"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/lawrence-toet/",
    name: "Lawrence Toet"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/kyle-seeback/",
    name: "Kyle Seeback"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/ted-opitz/",
    name: "Ted Opitz"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/wladyslaw-lizon/",
    name: "Wladyslaw Lizon"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/ryan-leef/",
    name: "Ryan Leef"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/jim-hillyer/",
    name: "Jim Hillyer"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/bryan-hayes/",
    name: "Bryan Hayes"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/joe-daniel/",
    name: "Joe Daniel"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/corneliu-chisu/",
    name: "Corneliu Chisu"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/john-carmichael/",
    name: "John Carmichael"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/brad-butt/",
    name: "Brad Butt"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/jay-aspin/",
    name: "Jay Aspin"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/stella-ambler/",
    name: "Stella Ambler"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/robert-sopuck/",
    name: "Robert Sopuck"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/terence-young/",
    name: "Terence Young"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/rodney-weston/",
    name: "Rodney Weston"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/john-weston/",
    name: "John Weston"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/lavar-payne/",
    name: "LaVar Payne"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/tilly-oneill-gordon/",
    name: "Tilly O'Neill-Gordon"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/greg-kerr/",
    name: "Greg Kerr"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/mike-allen/",
    name: "Mike Allen"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/joe-preston/",
    name: "Joe Preston"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/dick-harris/",
    name: "Dick Harris"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/mark-adler/",
    name: "Mark Adler"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/stephen-woodworth/",
    name: "Stephen Woodworth"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/blake-richards/",
    name: "Blake Richards"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/phil-mccoleman/",
    name: "Phil McColeman"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/ben-lobb/",
    name: "Ben Lobb"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/randy-hoback/",
    name: "Randy Hoback"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/earl-dreeshen/",
    name: "Earl Dreeshen"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/ray-boughen/",
    name: "Ray Boughen"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/rob-clarke/",
    name: "Rob Clarke"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/mike-wallace/",
    name: "Mike Wallace"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/dave-van-kesteren/",
    name: "Dave Van Kesteren"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/david-sweet/",
    name: "David Sweet"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/brian-storseth/",
    name: "Brian Storseth"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/bev-shipley/",
    name: "Bev Shipley"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/rick-norlock/",
    name: "Rick Norlock"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/colin-mayes/",
    name: "Colin Mayes"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/royal-galipeau/",
    name: "Royal Galipeau"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/patricia-davidson/",
    name: "Patricia Davidson"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/dave-mackenzie/",
    name: "Dave MacKenzie"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/blaine-calkins/",
    name: "Blaine Calkins"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/harold-albrecht/",
    name: "Harold Albrecht"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/mark-warawa/",
    name: "Mark Warawa"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/bradley-trost/",
    name: "Bradley Trost"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/david-tilson/",
    name: "David Tilson"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/larry-miller/",
    name: "Larry Miller"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/daryl-kramp/",
    name: "Daryl Kramp"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/ed-komarnicki/",
    name: "Ed Komarnicki"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/russ-hiebert/",
    name: "Russ Hiebert"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/guy-lauzon/",
    name: "Guy Lauzon"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/rob-anders/",
    name: "Rob Anders"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/gord-brown/",
    name: "Gord Brown"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/dean-allison/",
    name: "Dean Allison"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/gary-schellenberger/",
    name: "Gary Schellenberger"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/cheryl-gallant/",
    name: "Cheryl Gallant"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/joy-smith/",
    name: "Joy Smith"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/chris-warkentin/",
    name: "Chris Warkentin"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/costas-menegakis/",
    name: "Costas Menegakis"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/scott-armstrong/",
    name: "Scott Armstrong"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/pierre-lemieux/",
    name: "Pierre Lemieux"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/lois-brown/",
    name: "Lois Brown"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/chungsen-leung/",
    name: "Chungsen Leung"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/cathy-mcleod/",
    name: "Cathy McLeod"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/kelly-block/",
    name: "Kelly Block"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/roxanne-james/",
    name: "Roxanne James"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/parm-gill/",
    name: "Parm Gill"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/peter-braid/",
    name: "Peter Braid"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/tom-lukiwski/",
    name: "Tom Lukiwski"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/paul-calandra/",
    name: "Paul Calandra"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/andrew-saxton/",
    name: "Andrew Saxton"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/james-bezan/",
    name: "James Bezan"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/robert-goguen/",
    name: "Robert Goguen"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/bob-dechert/",
    name: "Bob Dechert"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/jeff-watson/",
    name: "Jeff Watson"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/bernard-trottier/",
    name: "Bernard Trottier"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/mark-strahl/",
    name: "Mark Strahl"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/dan-albas/",
    name: "Dan Albas"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/nina-grewal/",
    name: "Nina Grewal"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/peter-goldring/",
    name: "Peter Goldring"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/maurice-vellacott/",
    name: "Maurice Vellacott"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/scott-reid/",
    name: "Scott Reid"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/james-rajotte/",
    name: "James Rajotte"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/ron-cannan/",
    name: "Ron Cannan"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/peter-kent/",
    name: "Peter Kent"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/gordon-oconnor/",
    name: "Gordon O'Connor"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/diane-ablonczy/",
    name: "Diane Ablonczy"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/gerald-keddy/",
    name: "Gerald Keddy"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/randy-kamp/",
    name: "Randy Kamp"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/colin-carrie/",
    name: "Colin Carrie"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/david-anderson/",
    name: "David Anderson"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/mike-lake/",
    name: "Mike Lake"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/ed-holder/",
    name: "Ed Holder"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/kevin-sorenson/",
    name: "Kevin Sorenson"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/tim-uppal/",
    name: "Tim Uppal"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/maxime-bernier/",
    name: "Maxime Bernier"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/candice-hoeppner/",
    name: "Candice Bergen"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/alice-wong/",
    name: "Alice Wong"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/lynne-yelich/",
    name: "Lynne Yelich"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/john-duncan/",
    name: "John Duncan"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/michelle-rempel/",
    name: "Michelle Rempel"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/bal-gosal/",
    name: "Bal Gosal"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/gary-goodyear/",
    name: "Gary Goodyear"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/rob-moore/",
    name: "Rob Moore"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/jacques-gourde/",
    name: "Jacques Gourde"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/deepak-obhrai/",
    name: "Deepak Obhrai"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/susan-truppe/",
    name: "Susan Truppe"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/michael-chong/",
    name: "Michael Chong"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/laurie-hawn/",
    name: "Laurie Hawn"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/garry-breitkreuz/",
    name: "Garry Breitkreuz"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/leon-benoit/",
    name: "Leon Benoit"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/shelly-glover/",
    name: "Shelly Glover"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/erin-otoole/",
    name: "Erin O'Toole"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/greg-rickford/",
    name: "Greg Rickford"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/kerry-lynne-findlay/",
    name: "Kerry-Lynne Findlay"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/lisa-raitt/",
    name: "Lisa Raitt"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/rona-ambrose/",
    name: "Rona Ambrose"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/ed-fast/",
    name: "Ed Fast"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/leona-aglukkaq/",
    name: "Leona Aglukkaq"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/james-moore/",
    name: "James Moore"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/jason-kenney/",
    name: "Jason Kenney"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/christian-paradis/",
    name: "Christian Paradis"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/tony-clement/",
    name: "Tony Clement"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/denis-lebel/",
    name: "Denis Lebel"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/peter-van-loan/",
    name: "Peter Van Loan"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/peter-mackay/",
    name: "Peter MacKay"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/rob-nicholson/",
    name: "Rob Nicholson"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/diane-finley/",
    name: "Diane Finley"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/steven-blaney/",
    name: "Steven Blaney"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/bernard-valcourt/",
    name: "Bernard Valcourt"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/julian-fantino/",
    name: "Julian Fantino"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/pierre-poilievre/",
    name: "Pierre Poilievre"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/kellie-leitch/",
    name: "Kellie Leitch"
  },
  {
    ballot: "Yes",
    politician_url: "/politicians/steven-fletcher/",
    name: "Steven Fletcher"
  }
];
var representativeTemplate = '<div class="representative"><h3>Your MP, {{ name }}, {{ vote }}.</h3><p>Tell them how you feel about that:</p><a class="button" href="mailto:{{ email }}">Email</a>{{ #twitter }} <a class="button" target="_blank" href="https://twitter.com/intent/tweet?text={{ twitter }} ">Twitter</a>{{ /twitter }}</div>';

function representativeViewModel(repJSON) {
  var repsBallot = ballots.filter(function(eachBallot) {
    return eachBallot.name == repJSON.name;
  })[0];
  var vote = repsBallot.ballot.toLowerCase();
  if (vote == 'yes' || vote == 'no') {
    vote = 'voted ' + vote
  }

  return {
    name: repJSON.name,
    vote: vote,
    email: repJSON.email,
    twitter: twitterUsernameFromURL(repJSON.extra.twitter)
  };
}

function renderRepresentative(viewModel) {
  return Mustache.render(representativeTemplate, viewModel);
}

function twitterUsernameFromURL(url) {
  var name = /\w*$/.exec(url)[0];
  if (name && name !== "undefined") {
    return '@' + name;
  }
  return null;
}

function twitterMentionURL(body) {
  return 'https://twitter.com/intent/tweet?text=' + body
}

function getLocation() {
  if (!Modernizr.geolocation) {
    return;
  }

  navigator.geolocation.getCurrentPosition(fetchRepresentativeWithPosition);
}

function htmlFromRepresentatives(representatives) {
  var repHTML = '';
  if (representatives.length > 1) {
    repHTML = '<em class="note">Your postal code contains more than one riding.</em>';
  }
  repHTML += representatives.map(representativeViewModel).map(renderRepresentative).join('');
  return repHTML;
}

function isScrolledIntoView($element) {
  var $window = $(window);

  var docViewTop = $window.scrollTop();
  var docViewBottom = docViewTop + $window.height();

  var elementTop = $element.offset().top;
  var elementBottom = elementTop + $element.height();

  return ((docViewTop < elementTop) && (docViewBottom > elementBottom));
}

function scrollToElementIfNeeded($element) {
  if (!isScrolledIntoView($element)) {
    $('html, body').animate({
        scrollTop: $element.offset().top - 50
    }, 250);
  }
}

function fetchRepresentativeWithPostalCode(postalCode) {
  $.get('http://represent.opennorth.ca/postcodes/' + postalCode + '/?sets=federal-electoral-districts')
  .done(function(data) {
    var representatives = data['representatives_concordance'] || [];
    if (data['representatives_centroid']) {
      Array.prototype.push.apply(representatives, data['representatives_centroid']);  
    }
    var resultHTML = htmlFromRepresentatives(representatives);
    
    var $results = $('section#results');
    $results.empty().append(resultHTML);
    scrollToElementIfNeeded($results);
  })
  .fail(function() {
    console.log('There was an error fetching postal code data.');
  });
}

function fetchRepresentativeWithPosition(position) {
  var latitude = position.coords.latitude;
  var longitude = position.coords.longitude;

  $.get('http://represent.opennorth.ca/representatives/house-of-commons/?point=' + latitude + ',' + longitude)
  .done(function(data) {
    var representatives = data['objects'];
    var resultHTML = htmlFromRepresentatives(representatives);
    
    var $results = $('section#results');
    $results.empty().append(resultHTML);
    scrollToElementIfNeeded($results);
  })
  .fail(function() {
    console.log('There was an error fetching position data.');
  });
}

$(document).ready(function() {
  if (!Modernizr.geolocation) {
    $('fieldset#location').hide();
    $('p.or').hide();
  }

  $('a#location-submit').click(function(event) {
    getLocation();
    event.preventDefault();
  });

  $('button#postal-submit').click(function(event) {
    var postalCode = $('input[name=postal-code]').val().replace(' ', '').toUpperCase();
    fetchRepresentativeWithPostalCode(postalCode);
    event.preventDefault();
  });
});